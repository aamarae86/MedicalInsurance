<script>

    $(function () {

        $('#SpBeneficentNumber').parent('.form-line').addClass('focused');
        $('#CaseNumber').parent('.form-line').addClass('focused');
        $('#SpCaseList').addClass('active');
    });

    const PrintSpCaseOperationReport = function () {

        $('.page-loader-wrapper').css('display', 'block');

        $.ajax({
            url: `${$PrefixHostName}/SpGuaranteesReports/PrintSpCaseListReport`,
            method: 'POST',
            header: {
                'Authorization': `bearer ${$_token}`
            },
        data: {
            Lang: lang,
                CaseName: $('#CaseId').find(':selected').text(),
                CaseId: $('#CaseId').find(':selected').val(),
                SpBeneficentId: $('#SpBeneficentId').find(':selected').val(),
                StatuesId: $('#StatuesId').find(':selected').val(),
                CaseNumber: $('#CaseNumber').val(),
                SpBeneficentName: $('#SpBeneficentId').find(':selected').text(),
                SpBeneficentNumber: $('#SpBeneficentNumber').val(),
                StatuesName: $('#StatuesId').find(':selected').text(),
                TenantId: 0
                
            }
        }).done(function (data) {

            if (data.length > 0) {

                $('.page-loader-wrapper').css('display', 'none');
                var src = formAction;

                $('#bodyss').html('')
                $('#bodyss').append('<iframe id="ifram1" style="width:100%;height:550px" src="' + src + '"></iframe>')
                $('#model').modal('show');

            }
            else {
                $('.page-loader-wrapper').css('display', 'none');
                toastr.warning(NoData);
            }

        }).fail(function (response, x, r) {
            toastr.error(response.responseText);
        });

    };

    $('#SpBeneficentId').select2({
        ajax: {
            url: `${baseUrl}/SpBeneficent/GetSpBeneficentSelect2`,
            dataType: 'json',
            headers: {
                'Authorization': `Bearer ${$_token}`
            },
            data: function (params) {
                params.page = params.page || 1;
                return {
                    pageSize: pageSize,
                    pageNumber: params.page,
                    searchTerm: params.term,
                    lang: lang
                };
            },
            processResults: function (data, params) {

                params.page = params.page || 1;

                return {
                    results: data.result.results,
                    pagination: {
                        more: (params.page * pageSize) < data.result.total
                    }
                };
            }
        },
        placeholder: select2Placeholder,
        minimumInputLength: 0,
        allowClear: true,
        language: select2Lang,
        templateSelection: function (data, container) {

            if (data.altText)
                $('#SpBeneficentNumber').val(data.altText.split('__')[0]);

            return data.text;
        }
    });

    $('#CaseId').select2({
        ajax: {
            url: `${baseUrl}/SpCases/GetSpCasesSelect2`,
            dataType: 'json',
            headers: {
                'Authorization': `Bearer ${$_token}`
            },
            data: function (params) {
                params.page = params.page || 1;
                return {
                    pageSize: pageSize,
                    pageNumber: params.page,
                    searchTerm: params.term,
                    lang: lang
                };
            },
            processResults: function (data, params) {

                params.page = params.page || 1;

                return {
                    results: data.result.results,
                    pagination: {
                        more: (params.page * pageSize) < data.result.total
                    }
                };
            }
        },
        placeholder: select2Placeholder,
        minimumInputLength: 0,
        allowClear: true,
        language: select2Lang,
        templateSelection: function (data, container) {

            if (data.altText)
                $('#CaseNumber').val(data.altText);

            return data.text;
        }
    });

    $('#StatuesId').select2(ReturnSelect2ObjectForLkpsTypes('StatusLkpId'));
</script>